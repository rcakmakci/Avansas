

    var categoryData = {

      "Matbaa Ve Baskı İşleri": {
        "Kurumsal Çözümler": [
              "Kartvizit",
              "Baskılı Karton Bardak",
              "Kaşe",
              "Küp Bloknot",
              "Baskılı Ajanda/Defter",
              "Antetli Kağıt",
              "Diplomat Zarf",
              "Dosyalar",
              "Torba Zarf",
              "Amerikan Servis",
              "Promosyon Kalem",
              "Promosyon USB",
              "Promosyon Powerbank"
        ],   
    
        "Promosyon Ürünleri":  [
              "Promosyon Kalem",
              "Promosyon USB",
              "Promosyon Powerbank"
        ]
      },
      "Ofis Kırtasiye": {
          "Kalemler": [
              "Asetat Kalemleri",
              "Cam ve Boya Marker Kalem",
              "Dolma Kalemler",
              "Fineliner Kalem",
              "Fosforlu Kalemler",
              "İğne Uç Kalemler",
              "Jel Kalem",
              "İmza Kalemleri",
              "Kalem Uçları",
              "Keçeli Kalemler",
              "Kurşun Kalemler",
              "Kalem Mürekkebi",
              "Kaligrafi Kalemleri",
              "Kumaş Kalemi",
              "Kalem Seti",
              "Marker Kalem",
              "Prestij Kalemler",
              "Roller Kalemler",
              "Tükenmez Kalemler",
              "Tahta Kalemi",
              "Teknik Çizim Kalemleri",
              "Versatil Uçlu Kalemler"
          ],
          "Hediyelik Ürünler": [
              "Yeni İş Hediyesi",
              "Hediyelik Kutu",
              "Hediye Çantası",
              "Prestij Kalemler",
              "Prestij Defter",
              "Kalem Seti",
              "Cüzdan ve Anahtarlık"
          ]
      },
      "Kagit Ürünleri": {
        "Yazıcı ve Fotokopi Kağıtları": [
            "Fotokopi Kağıtları",
            "Numaralı Kağıt",
            "Fotoğraf Kağıtları",
            "Gramajlı Fotokopi Kağıtları",
            "Renkli Fotokopi Kağıtları",
            "Sürekli Form Kağıtları"
        ],
        "Teknik ve Özel Kağıtlar": [
            "Aydınger Kağıtları",
            "Karbon Kağıdı",
            "Plotter Kağıtları",
            "Eskiz Blok ve Defterler"
        ],
        "Termal Rulolar": [
            "Yazarkasa ve Pos Ruloları",
            "Sıramatik Rulosu",
            "Akaryakıt Pompa Rulosu"
        ]
      },
      "Kartuş toner":{
        "Kartuşlar":[
            "Brother Kartuş",
            "Canon Kartuş",
            "Canon Muadil Kartuş",
            "Epson Kartuş",
            "HP Kartuş",
            "HP Muadil Kartuş",
            "Brother Muadil Kartuş",
            "Epson Muadil Kartuş"
        ],
        "Tonerler" :[
            "Brother Toner",
            "Canon Toner",
            "HP Toner",
            "Lexmark Toner",
            "Oki Toner",
            "Samsung Toner",
            "Xerox Toner"
        ],
        "Şeritler" : [
            "Epson Şerit",
            "Oki Şerit",
            "Panasonic Şerit",
            "Printpen Şerit",
            "Lexmark Şerit",
            "Refill Şerit"
        ]
      },
      "Temizlik Ve Sağlık": {
        "Kağıt Temizlik Ürünleri": [
            "Kağıt Havlular",
            "Tuvalet Kağıtları",
            "Peçete ve Dispenserleri",
            "Islak Mendiller",
            "Klozet Kapak Örtüsü ve Dispenseri",
            "Muayene Masa Örtüsü"
        ],
        "Tuvalet - Banyo Temizliği": [
            "Çöp Torbaları",
            "Kağıt Havlular",
            "Kağıt Havlu Dispenserleri",
            "Klozet Koku Gidericiler",
            "Klozet Kapak Örtüsü ve Dispenseri",
            "Sıvı Sabunluk",
            "Sabunlar",
            "Temizlik Bezleri",
            "Tuvalet Kağıtları",
            "Tuvalet Kağıdı Dispenserleri",
            "Temel İhtiyaç Paketleri",
            "Yüzey Dezenfektanları"
        ],
        "Ofis Temizlik Ürünleri": [
            "Böcek İlaçları",
            "Çamaşır Suları",
            "Çöp Kovaları",
            "Çöp Torbaları",
            "Oda Kokuları",
            "Temizlik Bezleri",
            "Temizlik Mopları ve Yedekleri",
            "Temel İhtiyaç Paketleri",
            "El Dezenfektanları",
            "Yüzey Dezenfektanları"
        ],
        "Çamaşır Deterjanı": [
            "Sıvı Deterjan",
            "Toz Deterjan",
            "Yumuşatıcı",
            "Çamaşır Makinesi Temizleyici"
        ]
      },
      "Gıda Ve Mutfak": {
        "Temel Gıda Ürünleri": [
            "Kahvaltılık",
            "Kuru Bakliyat",
            "Makarna",
            "Sıvı Yağ",
            "Çorba",
            "Temel İhtiyaç Paketleri",
            "Hazır Yemek ve Konserve",
            "Un ve İrmik",
            "Tuz ve Baharat",
            "Kahvaltılık Gevrek",
            "Atıştırmalıklar"
        ],
        "Şekerler": [
            "Toz Şekerler",
            "Küp Şekerler",
            "Tatlandırıcılar",
            "Stick Şeker"
        ]
      },
      "Teknoloji": {
        "Ofis Cihazları": [
            "Barkod Okuyucular",
            "Ciltleme Makineleri",
            "Etiket Makinesi",
            "Kağıt Kesme Makinesi",
            "Hesap Makineleri",
            "Kağıt İmha Makineleri",
            "Kesintisiz Güç Kaynakları",
            "Laminasyon Makineleri",
            "Para Sayma ve Kontrol Ürünleri",
            "Tarayıcı",
            "Televizyon",
            "Kameralar ve Güvenlik Sistemleri",
            "Yazıcılar"
        ],
        "Pil": [
            "AA / Kalem Pil",
            "AAA / İnce Kalem Pil",
            "D / Büyük Pil",
            "C / Orta Pil",
            "Düğme Pil",
            "Şarj Edilebilir Pil",
            "Pil Şarj Aleti"
        ],
        "Kulaklık": [
            "Mikrofonlu Kulaklık",
            "Kablolu Kulaklık",
            "Bluetooth Kulaklık",
            "Kulak Üstü Kulaklık",
            "Kulak İçi Kulaklık"
        ]
      },
      "Mobilya Ve Hırdavat": {
        "Ofis Mobilyaları": [
            "Dolap ve Kitaplık",
            "Çalışma ve Ofis Sandalyesi",
            "Çalışma ve Ofis Masası",
            "Ofis Tipi Askılıklar",
            "Yönetici Koltukları",
            "Keson",
            "Sehpa"
        ],
        "Kamp ve Bahçe Ürünleri": [
            "Bahçe Sulama Ürünleri",
            "Kamp Sandalyesi",
            "Kamp Malzemeleri"
        ],
        "Ofis Aksesuarları": [
            "Bayrak ve Flama",
            "Dekoratif Masaüstü Ürünler",
            "Duvar ve Masa Saatleri",
            "Küllükler",
            "Paspas"
        ]
      },
      

    };

    // Load category Element
   
    $(function() {
    
        initializeCategoryElements(categoryData);
    
        $('.list-category-navbar').on('mouseenter', '.category-list-element', handleCategoryHover)
                                  .on('mouseleave', '.category-list-element', closeDropDown);
    
        $('.list-category-navbar').on("mouseenter", ".title-in-dropdown", handleTitleHover);
    

    });
    function initializeCategoryElements(categoryData) {
        const categoryFragment = $(document.createDocumentFragment());
    
        $.each(categoryData, (mainCategory) => {
            const mainProductTemplate = createMainProductTemplate(mainCategory);
            categoryFragment.append(mainProductTemplate);
        });
    
        const forYouElement = createForYouElement();
        categoryFragment.append(forYouElement);
    
        $(".list-category-navbar").append(categoryFragment);
    }
    
    function createMainProductTemplate(mainCategory) {
        return $(".category-list-element-template")
            .clone()
            .removeClass("category-list-element-template")
            .css("display", "flex")
            .find(".list-title")
            .text(mainCategory)
            .end();
    }
    
    function createForYouElement() {
        return $(".for-you-template")
            .clone()
            .removeClass("for-you-template")
            .css("display", "inline-block");
    }
    
    function handleCategoryHover() {
        const $ulElement = $(this).find(".dropdown .category-titles ul");
    
        if ($ulElement.children().length === 0) {
            populateCategoryData($(this)); // bunu yaparak nesene oluşturuyorum ki argüman olarak kullanabileyim :)
            activateFirstCategoryTitleAndBox.call(this);
            
        }
        
        openDropDown.call(this);
    }
    
    function populateCategoryData($element) {
        const categoryName = $element.find(".list-title").text();
        const listData = categoryData[categoryName];
        const $ulElement = $element.find(".dropdown .category-titles ul");
    
        $.each(listData, (title, items) => {
            const titleTemplate = createTitleTemplate(title);
            $ulElement.append(titleTemplate);
    
            const contentTemplate = createContentTemplate(title, items);
            $element.find(".category-content-box").append(contentTemplate);
        });
    }
    
    function createTitleTemplate(title) {
        var newTitleInDropdown =  $(".title-in-dropdown-template").clone();
            newTitleInDropdown.css("display", "flex")
            .removeClass("title-in-dropdown-template")
            .find('.category-title')
            .text(title);
            newTitleInDropdown.attr("data-category", title);
            
        return newTitleInDropdown;
    }
    
    function createContentTemplate(title, items) {
        const contentTemplate = $(".category-content-template")
            .clone()
            .removeClass("category-content-template")
            .attr("data-category", title);

           
        let currentUl = contentTemplate.find("ul");
        
        $.each(items, (i, item) => {
            if (i % 8 === 0){
                currentUl = $('<ul></ul>');
                contentTemplate.append(currentUl);
            }
            currentUl.append(`<li>${item}</li>`);
            
        });
        
    
        return contentTemplate;
    }
    
    function activateFirstCategoryTitleAndBox() {
        const $firstCategoryTitle = $(this).find(".category-titles ul li").first();
        const dataCategory = $firstCategoryTitle.attr("data-category");
    
        setActiveBox.call($firstCategoryTitle, dataCategory);
        setActiveTitle.call($firstCategoryTitle);
    }
    
    function handleTitleHover() {
        const dataCategory = $(this).attr("data-category");
        setActiveBox.call(this, dataCategory);
        setActiveTitle.call(this);
    }
    
    function setActiveBox(dataCategory) {
        const $dropdownElement = $(this).closest(".dropdown");
        $dropdownElement.find(".category-content-box .category-content").removeClass('active');
        $dropdownElement.find(`.category-content-box .category-content[data-category="${dataCategory}"]`).addClass('active');
    }
    
    function setActiveTitle() {
        $(this).closest(".category-titles").find(".category-title").removeClass("active-title");
        $(this).find(".category-title").addClass("active-title");
    }
    
    function openDropDown() {
        $('.overlay').addClass("overlay-active");
    }
    
    function closeDropDown() {
        $('.overlay').removeClass("overlay-active");
    }

